<html>
    <head>
        <title>Nueva Compra</title>
        <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">

                <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
                    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
                    <!-- Iconos -->
                    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
                        </head>
                        <body style="background-color:#363434">

                            <div class="container">

                                <div th:insert="menu :: #principal"></div>
                                <hr>

                                    <center><h2 style="color: white;"> Nueva Compra</h2> </center>

                                    <hr style="color: white;">

                                        <br><br>
                                                <center>
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="200" height="200" fill="currentColor" class="bi bi-bag-fill" viewBox="0 0 16 16" style="color: white;">
                                                        <path d="M8 1a2.5 2.5 0 0 1 2.5 2.5V4h-5v-.5A2.5 2.5 0 0 1 8 1zm3.5 3v-.5a3.5 3.5 0 1 0-7 0V4H1v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V4h-3.5z"/>
                                                    </svg>
                                                </center>
                                                <br><br>

                                                        <form action="/compra/agregar" method="post" class="row g-3">

                                                            <div class="col-md-6">
                                                                <label class="form-label" style="color: white;">Producto</label>
                                                                <select name="producto_id" class="form-control" required="required">
                                                                    <option value="" selected disabled>Seleccione</option>
                                                                    <option th:each="producto : ${productos}" th:value="${producto.id}" th:text="${producto.nombre+' (S/'+producto.precio+')'}"></option>
                                                                </select>

                                                            </div>

                                                            <div class="col-md-6">
                                                                <label  class="form-label" style="color: white;">Cantidad</label>
                                                                <input type="number" class="form-control" name="cant"  placeholder="Ingrese cantidad" required="required">
                                                            </div>

                                                            <hr> 

                                                                <div class="col-12">
                                                                    <button type="submit" class="btn btn-success">Agregar</button>
                                                                </div>

                                                        </form>

                                                        <hr>

                                                            <table class="table" style="color: white;">
                                                                <tr>
                                                                    <th>#</th>
                                                                    <th>Producto</th>
                                                                    <th>Precio</th>
                                                                    <th>Cantidad</th>
                                                                    <th>Total</th>
                                                                    <th>Eliminar</th>
                                                                </tr>
                                                                <tr th:each="carrito,status : ${carrito_lista}" style="color: white;">
                                                                    <td th:text="${status.count}"></td>
                                                                    <td th:text="${carrito.nombre}"></td>
                                                                    <td th:text="${carrito.precio}"></td>
                                                                    <td th:text="${carrito.cantidad}"></td>
                                                                    <td th:text="${carrito.total}"></td>
                                                                    <td>
                                                                        <a th:href="@{/compra/eliminarcarrito(id=${status.count})}" target="_self" style="color:red;">
                                                                            <i class="bi bi-trash3-fill"></i>
                                                                        </a>
                                                                    </td>
                                                                </tr>
                                                            </table>


                                                            <hr>

                                                                <form action="/compra/registrar" method="post" class="row g-3">


                                                                    <div class="col-md-6">
                                                                        <label class="form-label" style="color: white;">Proveedor</label>
                                                                        <select name="proveedor_id" class="form-control" required="required">
                                                                            <option value="" selected disabled>Seleccione</option>
                                                                            <option th:each="proveedor : ${proveedores}" th:value="${proveedor.id}" th:text="${proveedor.ruc}"></option>
                                                                        </select>
                                                                    </div>


                                                                    <div class="col-md-6">
                                                                        <label class="form-label" style="color: white;">Tipo de Comprobante</label>
                                                                        <select name="comprobante_id" class="form-control" required="required">
                                                                            <option value="" selected disabled>Seleccione</option>
                                                                            <option th:each="comprobante : ${comprobantes}" th:value="${comprobante.id}" th:text="${comprobante.nombre}"></option>
                                                                        </select>

                                                                    </div>

                                                                    <div class="col-md-6">
                                                                        <label class="form-label" style="color: white;">Medio de Pago</label>
                                                                        <select name="mediodepago_id" class="form-control" required="required">
                                                                            <option value="" selected disabled>Seleccione</option>
                                                                            <option th:each="mediodepago : ${mediodepagos}" th:value="${mediodepago.id}" th:text="${mediodepago.nombre}"></option>
                                                                        </select>

                                                                    </div>

                                                                    <div class="col-md-6">
                                                                        <label  class="form-label" style="color: white;">Fecha</label>
                                                                        <input type="datetime-local" class="form-control" name="fecha"  placeholder="Ingrese fecha" required="required">
                                                                    </div>

                                                                    <hr> 

                                                                        <div class="col-12">
                                                                            <button type="submit" class="btn btn-primary">Terminar Compra</button>
                                                                            <a th:href="@{/compra/}" class="btn btn-danger" target="_self">Volver</a>
                                                                        </div>

                                                                </form>
                                                                </div>
                                                                </body>
                                                                </html>